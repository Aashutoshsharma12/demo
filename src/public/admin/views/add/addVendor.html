<!DOCTYPE html>
<html>

<head>


    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Admin | Jroute</title>
    <link rel="icon" href="../../admin/assets/img/trucklogo.png" type="image">

    <link rel="stylesheet" href="../../admin/assets/paginate/bs-pagination.min.css">
    <script src="//code.jquery.com/jquery.min.js"></script>
    <script src="../../admin/assets/paginate/pagination.min.js"></script>

    <!-- goolgle api  AIzaSyDIKiU6onrRi-GyEf6tdqGoEKmyYtFzFJs -->
    <script
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDIKiU6onrRi-GyEf6tdqGoEKmyYtFzFJs&callback=initAutocomplete&libraries=places">
        </script>

    <!--<link rel="stylesheet" href="dist/pagination.min.css">-->
    <link href="../../admin//assets/css/plugins/sweetalert/sweetalert.css" rel="stylesheet">
    <link href="../../admin/assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="../../admin/assets/font-awesome/css/font-awesome.css" rel="stylesheet">
    <link href="../../admin/assets/css/plugins/iCheck/custom.css" rel="stylesheet">
    <link href="../../admin/assets/css/animate.css" rel="stylesheet">
    <link href="../../admin/assets/css/style.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="../../admin/assets/paginate/pagination.min.css">

    <!-- timing -->
    <script src="https://cdn.jsdelivr.net/timepicker.js/latest/timepicker.min.js"></script>
    <link href="https://cdn.jsdelivr.net/timepicker.js/latest/timepicker.min.css" rel="stylesheet" />


    <link href="https://code.jquery.com/ui/1.10.4/themes/ui-lightness/jquery-ui.css" rel="stylesheet">
    <script src="../../admin/scripts/common/pipeline.js"></script>
    <script src="../../admin/scripts/common/validation.js"></script>
    <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
    <script src="https://code.jquery.com/ui/1.10.4/jquery-ui.js"></script>

    <!-- js files -->
    <script src="../../admin/scripts/listing/sub_category.js"></script>
    <script src="../../admin/scripts/auth/logout.js"></script>
    <script src="../../admin/scripts/dashboard.js"></script>
    <script src="../../admin/scripts/add/editVendor.js"></script>


    <script src="https://www.gstatic.com/firebasejs/7.18.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.18.0/firebase-messaging.js"></script>
    <script src="../../admin/scripts/index/index.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.12/css/intlTelInput.css" />
    <link rel="stylesheet" href="../css/intlTelInput.css">
    <link rel='stylesheet' type="text/css" href='https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css'>
    <link rel='stylesheet' type="text/css"
        href='https://cdnjs.cloudflare.com/ajax/libs/jquery-nice-select/1.1.0/css/nice-select.min.css'>
    <link rel='stylesheet' type="text/css"
        href='https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/12.1.2/css/intlTelInput.css'>
    <script src="https://unpkg.com/libphonenumber-js/bundle/libphonenumber-js.min.js"></script>


    <style type="text/css">
        .container {
            margin: 100px auto;
        }
        input.storeImage_file{
            width: 150px !important;
            height: 150px !important;
            cursor: pointer;
        }
        .innerSec {
            border: 1px solid #1AB394;
            padding: 10px;
        }

        .form-control,
        .single-line {
            border: 1px solid #1AB394;
            border-radius: 7px;
        }

        input:focus {
            border: 1px solid #1AB394 !important;

        }

      

        input.storeImage_file {
            position: absolute;
            top: 35px;
            height: 130px;
            width: 140px;
            left: 15px;
            opacity: 0;
            z-index: -1;
            cursor: pointer;
        }

        input,
        select {
            height: 50px !important;
        }

        .addVendor_cancel {
            border: 1px solid #1AB394;
            color: #1AB394;

        }

        .addVendor_cancel:hover {
            border: 1px solid #1AB394;
            color: #1AB394;

        }

        @media only screen and (max-width: 992px) {
            .lastline {
                margin: 0px !important;
                width: 100% !important;
                display: inline-block !important;
            }
        }
    </style>

</head>

<body onload="classActive();autocomplete();checkPermission();category();timeDropdown();timeDropdown1();">
    <div id="wrapper">
        <navbar></navbar>

        <div id="page-wrapper" class="gray-bg">
            <div class="border-bottom">
                <nav class="navbar navbar-static-top white-bg" role="navigation" style="margin-bottom: 0">
                    <div class="navbar-header">
                        <a class="navbar-minimalize minimalize-styl-2 menuBtn" href="#"><i class="fa fa-bars"></i>
                        </a>
                        <form role="search" class="navbar-form-custom" action="search_results.html">
                        </form>
                    </div>
                    <ul class="nav navbar-top-links navbar-right">
                        <li>
                            <span class="m-r-sm text-muted welcome-message">Welcome to Jroute APP Admin </span>
                        </li>

                        <li><a class="dropdown-item" onclick="logout()">Logout <img
                                    src="../../../admin/assets/img/logout .png"></a></li>
                    </ul>

                </nav>
            </div>

            <div class="wrapper border-bottom white-bg page-heading">
            <div class="pageheading">
                <div class="mt-3 mr-4">
                    <h2><strong>Vendor Management</strong></h2>
                </div>
                <div class="d-flex align-items-center">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item">
                            <a href="dashboard">
                                <div class="col-lg-6"> <strong>Home</strong>
                            </a>
                        </li>
                        <li class="breadcrumb-item" style="color:skyblue">
                            <a href="vendor_list"><strong>Vendor Management </strong>
                            </a>
                        </li>
                        <li class="breadcrumb-item active" style="color:skyblue">
                            <strong>Add vendor</strong>
                        </li>
                    </ol>
                </div>
            </div>
            </div>
            <div class="wrapper wrapper-content animated fadeInRight">
                <div>
                    <form id="form" method="post" enctype="multipart/form-data" class="maxwidth" role="form">
                        <div class="ibox ">
                            <div class="ibox-content">
                                <form>
                                    <div class="innerSec">
                                        <div class="row">
                                            <div class="col-lg-5 col-md-5">
                                                <div class="form-group">
                                                    <h4>Select Category Type</h4>
                                                    <select class="form-control" name="storeTypeId" id="storeTypeId"
                                                        required>
                                                        <option disabled value="" hidden selected>Select</option>
                                                        <input type="text" class="categoryId" style="display: none;"
                                                            name="storeTypeId1" id="storeTypeId1">
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-12 col-sm-6 col-md-6 col-lg-4">
                                                <div class="form-group">
                                                    <h4>Enter Shop Name</h4>
                                                    <input type="text" oninput="validate(this)" class="form-control"
                                                        id="businessName" name="businessName"
                                                        placeholder=" Enter Shop Name in (English)" required>
                                                </div>
                                                <div class="form-group">
                                                    <input type="text" oninput="validate(this)" class="form-control"
                                                        id="ar_businessName" name="ar_businessName"
                                                        placeholder=" Enter Shop Name in (Arabic)" required>
                                                </div>
                                            </div>
                                            <div class="col-12 col-sm-6 col-md-6 col-lg-4">
                                                <div class="form-group">
                                                    <h4>Enter Owner Name</h4>
                                                    <input type="text" oninput="validate(this)" class="form-control"
                                                        id="ownerName" name="ownerName"
                                                        placeholder=" Enter Owner Name in (English)" required>
                                                </div>
                                            </div>
                                            <div class="col-12 col-sm-12 col-md-12 col-lg-4">
                                                <h4>Mobile Number</h4>
                                                <div class="row mx-0">
                                                    <div class="col-12 d-flex tell-code pl-1">
                                                        <input type="tel" id="countryCode" name="countryCode"
                                                            class="form-control mobile flagInput" required />
                                                        <input type="text" id="phoneNumber" name="phoneNumber"
                                                            class="form-control flagPhone"
                                                            placeholder="Enter Phone Number" minlength="3"
                                                            maxlength="100" required>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-lg-12 col-md-12 col-12">
                                                <div class="form-group">
                                                    <h4>Address</h4>
                                                    <input type="text" oninput="validate(this)" class="form-control"
                                                        id="fullAddress" name="fullAddress"
                                                        placeholder=" Enter Address in (English)" required>
                                                </div>

                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-lg-4 col-md-4 col-12">
                                                <div class="form-group">
                                                    <h4>ZIP Code</h4>
                                                    <input type="text" oninput="validate(this)" class="form-control"
                                                        id="zipCode" name="zipCode" placeholder=" Enter ZIP code"
                                                        required>
                                                </div>
                                            </div>
                                            <div class="col-lg-4 col-md-4 col-12">
                                                <div class="form-group">
                                                    <h4>State</h4>
                                                    <input type="text" oninput="validate(this)" class="form-control"
                                                        id="state" name="state"
                                                        placeholder=" Enter State Name in (English)" required>
                                                </div>

                                            </div>
                                            <div class="col-lg-4 col-md-4 col-12">
                                                <div class="form-group">
                                                    <h4>City</h4>
                                                    <input type="text" oninput="validate(this)" class="form-control"
                                                        id="city" name="city"
                                                        placeholder=" Enter City Name in (English)" required>
                                                </div>

                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-lg-4 col-md-4 col-12">
                                                <div class="form-group">
                                                    <h4>Country</h4>
                                                    <input type="text" oninput="validate(this)" class="form-control"
                                                        id="country" name="country"
                                                        placeholder=" Enter Country Name in (English)" required>
                                                    <input type="text" class="form-control" id="lat" name="lat"
                                                        style="display: none;">
                                                    <input type="text" class="form-control" id="lng" name="lng"
                                                        style="display: none;">
                                                    <input type="text" class="form-control" id="googlePlaceId"
                                                        name="googlePlaceId" style="display: none;">
                                                    <input type="text" class="form-control" id="countryCodes"
                                                        name="countryCodes" style="display: none;">
                                                </div>
                                            </div>
                                            <div class="col-lg-4 col-md-4 col-12">
                                                <div class="form-group" style="position:relative;">
                                                    <h4>Shop Open Time</h4>
                                                    <select type="text" class="form-control time_drp" id="openTime"
                                                        name="openTime" required>
                                                        <input type="text" class="openTime1" style="display: none;"
                                                            name="openTime1" id="openTime1">
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-lg-4 col-md-4 col-12">
                                                <div class="form-group" style="position:relative;">
                                                    <h4>Shop Close Time</h4>
                                                    <select class="form-control time_drp" id="closeTime" name="closeTime"
                                                        required>
                                                        <input type="text" class="closeTime1" style="display: none;"
                                                            name="closeTime1" id="closeTime1">
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-lg-4 col-md-4 col-12">
                                                <div class="form-group">
                                                    <h4>Password</h4>
                                                    <input type="text" oninput="validate(this)" class="form-control"
                                                        id="password" name="password" placeholder=" Enter Password"
                                                        required>
                                                    <span id="passwordError" style="color: red;"></span>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-lg-4 col-md-5 col-12 form-group" style="text-align: left;">
                                                <h4>Store Image</h4>
                                                <label id="image">
                                                    <img id="blah" src="../../admin/assets/img/emptyphoto.png" alt=""
                                                        style="width:150px; height:150px; border-radius: 23px;
                                                        cursor: pointer;
                                                    " onchange="readURL(this)"><br>
                                                    <input class="storeImage_file" type='file' accept="image/*"
                                                        name='image' id="image" onchange="readURL(this)">
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <a href="/admin/vendor_list"><button type="button"
                                                class="btn btn-white block half-width m-b addVendor_cancel"
                                                data-dismiss="modal">Cancel</button></a>
                                        <a href="/Submit"><button
                                                class="btn btn-primary block half-width m-b">Submit</button></a>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>



    <!-- Mainly scripts -->
    <script src="../../admin/assets/js/jquery-3.1.1.min.js"></script>
    <script src="../../admin/assets/js/popper.min.js"></script>
    <script src="../../admin/assets/js/bootstrap.js"></script>
    <script src="../../admin/assets/js/plugins/metisMenu/jquery.metisMenu.js"></script>
    <script src="../../admin/assets/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>

    <!-- Peity -->
    <script src="../../admin/assets/js/plugins/peity/jquery.peity.min.js"></script>

    <!-- Custom and plugin javascript -->
    <script src="../../admin/assets/js/inspinia.js"></script>
    <script src="../../admin/assets/js/plugins/pace/pace.min.js"></script>

    <!-- iCheck -->
    <script src="../../admin/assets/js/plugins/iCheck/icheck.min.js"></script>

    <!-- Peity -->
    <script src="../../admin/assets/js/demo/peity-demo.js"></script>
    <script type="text/javascript" src="../../admin/assets/paginate/pagination.min.js"></script>
    <script src="assets/js/plugins/sweetalert/sweetalert.min.js"></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery-nice-select/1.1.0/js/jquery.nice-select.min.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/12.1.2/js/intlTelInput.js'></script>
    <script src="https://unpkg.com/libphonenumber-js/bundle/libphonenumber-js.min.js"></script>

    <script>
        var token = localStorage.getItem("token");
        var host = window.location.protocol + "//" + window.location.host;
        if (!token) {
            localStorage.removeItem("name");
            localStorage.removeItem("token");
            window.location.replace('/login');
        }
        function mobileNoselect() {
            if ($('#form').length) {
                $(".mobile").intlTelInput();
                $(".mobile").intlTelInput("setNumber", "+91");
            };
        };
        //* Select js
        function nice_Select() {
            if ($('.product_select').length) {
                $('select').niceSelect();
            };
        };
        // Function Calls* 
        // verificationForm ();
        mobileNoselect();
        nice_Select();
        document.getElementById("passwordError").innerHTML = ''
        $("#form").submit(function (e) {
            e.preventDefault();
            var number_withcounrtCode = document.getElementById('countryCode').value + "" + document.getElementById('phoneNumber').value
            if (libphonenumber.parsePhoneNumber(number_withcounrtCode).isValid() == true) {
                var openTime = document.getElementById('openTime').value
                var closeTime = document.getElementById('closeTime').value
                if (!openTime && !closeTime) {
                    alert("Please enter Time")
                }
                if (openTime > closeTime) {
                    alert(" Close Time should be after Open Time")
                } else {
                    var password = document.getElementById('password').value
                    // let passwordRegex = /^(?=.*\d)(?=.*[A-Z])(?=.*[a-z])(?=.*[a-zA-Z!@^#$%&*? "])[a-zA-Z0-9^!@#$*%&?]{6,20}$/
                    let passwordRegex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[#$@!%&*?])[A-Za-z\d#$@!%&*?]{8,30}$/
                    if (passwordRegex.test(password)) {
                        var formData = new FormData(this);
                        formData.append("addressLine1", document.getElementById('fullAddress').value)
                        $.ajax({
                            url: host + '/api/v1/admin/vendor/addVendor',
                            type: 'Post',
                            data: formData,
                            beforeSend: function (xhr) {
                                xhr.setRequestHeader('Authorization', token);
                                xhr.setRequestHeader('timezone', localStorage.getItem('timeZone'));
                            },
                            contentType: false,
                            processData: false,
                        }).done(function (data) {
                            // If successful
                            window.location.replace('/admin/vendor_list');
                        }).fail(function (jqXHR, textStatus, errorThrown) {
                            // If fail
                            alert(jqXHR.responseJSON.error)
                        })
                    } else {
                        alert("Password must be more than 8 characters with 1 uppercase,1number & 1 symbol.")
                    }
                }
            } else {
                alert('Invalid Phone Number Please enter valid Phone Number')
            }

        });
        function readURL(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();
                reader.onload = function (e) {
                    $('#blah')
                        .attr('src', e.target.result)
                };
                reader.readAsDataURL(input.files[0]);
            }
        }
        function classActive() {
            this.setTimeout(() => {
                document.getElementById('vendor-nav')?.classList.add("active");
            }, 1500)
        }
        //not allowed space
        $(function () {
            $('#password').on('keypress', function (e) {
                if (e.which == 32) {
                    return false;
                }
            });
        });
        $(".time-picker").hunterTimePicker({
            callback: function (e) {
                alert(e.val());
            }
        });
    </script>
</body>

</html>